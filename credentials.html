<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs" name=description> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=/Material-Design-Icons.woff rel=preload type=font/woff2 as=font crossorigin=anonymous> <style>@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:local('Source Sans Pro Regular'),local('SourceSansPro-Regular'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:700;font-display:swap;src:local('Source Sans Pro Bold'),local('SourceSansPro-Bold'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Material Design Icons";src:url(/Material-Design-Icons.woff) format("woff");font-weight:400;font-style:normal}</style> <link href=icon-76x76.png rel=apple-touch-icon sizes="60x60 72x72 76x76"> <link href=icon-120x120.png rel=apple-touch-icon sizes="114x114 120x120"> <link href=icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=icon-180x180.png rel=apple-touch-icon sizes="167x167 180x180"> <link href=icon-32x32.png rel=icon sizes="16x16 32x32" type=image/png> <link href=icon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=manifest.json rel=manifest> <link href=client/main.4188134553.css rel=stylesheet><link href=client/[feature].html.2825da7c.css rel=stylesheet><link href=client/prism.3fa19f60.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>What Web Can Do Today: Credentials</title> <meta content="What Web Can Do Today: Credentials" property=og:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." property=og:description> <meta content=https://whatwebcando.today/credentials.html property=og:url> <meta content=https://whatwebcando.today/images/share-image.png property=og:image> <meta content="What Web Can Do Today: Credentials" name=twitter:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." name=twitter:description> <meta content=https://whatwebcando.today/images/share-image.png name=twitter:image><noscript id=sapper-head-end></noscript> <meta content=yes name=apple-mobile-web-app-capable> <meta content=yes name=mobile-web-app-capable> <meta content="What Web Can Do Today" name=application-name> <meta content="What Web Can Do" name=apple-mobile-web-app-title> <meta content=https://whatwebcando.today/icon-144x144.png name=msapplication-TileImage> <meta content=#ffffff name=theme-color> <meta content=#ffffff name=msapplication-navbutton-color> <meta content=black-translucent name=apple-mobile-web-app-status-bar-style> <meta content=/ name=msapplication-starturl> <meta content=website property=og:type> <meta content=WhatWebCanDo property=og:site_name> <meta content=summary name=twitter:card> <meta content=@WhatWebCanDo name=twitter:site> </head> <body> <div id=sapper> <header class="svelte-1cc53ms text-center"> <nav> <ul class=svelte-1cc53ms> <li class=svelte-1cc53ms><a href=. class=svelte-1cc53ms>Features</a></li> <li class=svelte-1cc53ms><a href=/articles/ class=svelte-1cc53ms>Articles</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#services rel=noopener target=_blank class=svelte-1cc53ms>Services</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#workshops rel=noopener target=_blank class=svelte-1cc53ms>Trainings</a></li> </ul> </nav> <div class="svelte-1cc53ms title-container"> <h1 class=svelte-1cc53ms>What Web Can Do Today?</h1> <p class=svelte-1cc53ms>Can I rely on the Web Platform features to build my app?</p> <p class=svelte-1cc53ms>An overview of the device integration HTML5 APIs</p> </div> </header> <main class="svelte-126eukc page"> <nav aria-label=breadcrumbs class=breadcrumb> <ul> <li><a href=/ >Features</a></li> <li class=is-active><a href=/credentials.html aria-current=page>Credentials</a></li> </ul> </nav> <article> <h2>Credentials</h2> <section> <p>The <b>Credential Management API</b> allows authorized Web applications to store and request user credentials (like login and password or federated login data) programmatically on behalf of the user. The API offers a replacement for browser built-in or 3rd-party password stores which allows the Web application to instrument when and how the credentials are stored and read, for example to offer automatic sign-in capability.<p>When retrieving the previously stored credential, the Web application may decide if the user mediation is expected. When <code>mediation</code> flag is set to <code>silent</code>, the credential will only be resolved if the user had previously stored the single credential for this application. With <code>optional</code> option set, the UI to choose the credential will appear unless there's a single credential stored. Finally, with <code>required</code> option, the UI will always be shown, regardless of the previously stored credentials existence.<p>As of early 2020, there is also a proposal for the API to address delivering one-time passwords to be used in multiple factor authentication schemes. The earlier version of this API addition was experimentally implemented in Chrome 78-80 for Android within <code>navigator.sms</code> interface. The API relies on the specific message content convention â€“ the message is expected to contain the requesting app's URL. Right now it only defines SMS as a message transport.</p> </section> <section> <h3>API glimpse</h3> <div class="language-javascript api-glimpse"><dl> <dt><code>credential = new PasswordCredential(form)</code></dt> <dd>Creates the credential object based on the username and password data detected in a HTML <code>&lt;form></code> element.</dd> <dt><code>credential = new PasswordCredential({id, password, name, iconURL})</code></dt> <dd>Creates the credential object manually based on the data provided.</dd> <dt><code>credential = new FederatedCredential({id, name, iconURL, provider, protocol})</code></dt> <dd>Creates the credential object based on the federated login service specified with <code>provider</code> and <code>protocol</code> options.</dd> <dt><code>navigator.credentials.store(credential)</code></dt> <dd>Stores the credential provided for future access. Returns a <code>Promise</code> resolved when the credential is successfully persisted by the browser.</dd> <dt><code>navigator.credentials.get({mediation})</code></dt> <dd>Retrieves the previously stored credential from the browser, optionally with user mediation (UI). Returns a <code>Promise</code> resolved with fetched credential or <code>null</code>.</dd> <dt><code>navigator.credentials.preventSilentAccess()</code></dt> <dd>Ensures the user mediation is required on the next credential access request, effectively "logging out" the user.</dd> </dl> <p><b>Web OTP API (proposal)</b></p> <dl> <dt><code>navigator.credentials.get({otp: {transport: ['sms']}})</code></dt> <dd>Returns a <code>Promise</code> resolved with the one-time password (code) when the device receives the OTP SMS message containing the requesting URL and the code.</dd> </dl></div> </section> <section> <h3>Live Demo</h3> <div class="svelte-126eukc demo-placeholder"> <style>.column{flex:1 1}.user-mediation label{margin-right:1em}</style> <div class=columns> <div class=column> <form id=credential-form onsubmit=storeCredential(event)> <h2>Credentials Management API</h2> <p><b>Store your credentials:</b></p> <p> <label>login: <input name=username autocomplete=username required></label> <label>password: <input name=password type=password autocomplete=current-password required></label> </p> <p><button type=submit>Store credential</button></p> <p class=user-mediation> <b>User mediation:</b><br> <label><input name=mediation type=radio value=silent> silent</label> <label><input name=mediation type=radio value=optional checked> optional</label> <label><input name=mediation type=radio value=required> required</label> </p> <p><button type=button onclick=requestCredential()>Request credential</button></p> <p><button type=button onclick=preventSilentAccess()>Prevent silent access (logout)</button></p> <hr> <h2>Web OTP API</h2> <p><button type=button onclick=waitForSms()>Wait for OTP SMS</button></p> </form> </div> <div class=column id=result></div> </div> </div> <ul class="svelte-126eukc tabs"> <li class="svelte-126eukc tab"> <input name=tabs type=radio checked class=svelte-126eukc id=demo-code-js> <label class=svelte-126eukc for=demo-code-js>JavaScript</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-js><code class=language-javascript>function storeCredential() {
  event.preventDefault();

  if (!navigator.credentials) {
    alert('Credential Management API not supported');
    return;
  }
  
  let credentialForm = document.getElementById('credential-form');
  let credential = new PasswordCredential(credentialForm);
  navigator.credentials.store(credential)
    .then(() => log('Storing credential for &lt;b>' + credential.id + '&lt;/b> (result cannot be checked by the website).'))
    .catch((err) => log('Error storing credentials: ' + err));
}

function requestCredential() {
  if (!navigator.credentials) {
    alert('Credential Management API not supported');
    return;
  }
  
  let mediationValue = document.getElementById('credential-form').mediation.value;
  navigator.credentials.get({password: true, mediation: mediationValue})
    .then(credential => {
      let result = 'none';
      if (credential) {
        result = credential.id + ', ' + credential.password.replace(/./g, '*');
      }
      log('Credential read: &lt;b>' + result + '&lt;/b>');
    })
    .catch((err) => log('Error reading credentials: ' + err));
}

function preventSilentAccess() {
  if (!navigator.credentials) {
    alert('Credential Management API not supported');
    return;
  }
  
  navigator.credentials.preventSilentAccess()
    .then(() => log('Silent access prevented (mediation will be required for next credentials.get() call).'))
    .catch((err) => log('Error preventing silent access: ' + err));
}

function waitForSms() {
  if ('OTPCredential' in window) {
    log('Waiting for SMS. Try sending yourself a following message:\n\n' +
        '&lt;pre>Your verification code is: 123ABC\n\n&lt;br>' +
        '@whatwebcando.today #123ABC&lt;/pre>');
  
    navigator.credentials.get({otp: {transport: ['sms']}})
      .then((code) => log('Code received: ' + code))
      .catch((error) => log('SMS receiving error: ' + error));
  } else {
    alert('Web OTP API not supported');
  }
}

function log(info) {
  var logTarget = document.getElementById('result');
  var timeBadge = new Date().toTimeString().split(' ')[0];
  var newInfo = document.createElement('p');
  newInfo.innerHTML = '&lt;span class="badge">' + timeBadge + '&lt;/span> ' + info;
  logTarget.appendChild(newInfo);
}</code></pre> </li> <li class="svelte-126eukc tab"> <input name=tabs type=radio class=svelte-126eukc id=demo-code-html> <label class=svelte-126eukc for=demo-code-html>HTML</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-html><code class=language-html>&lt;div class="columns">
  &lt;div class="column">
    &lt;form id="credential-form" onsubmit="storeCredential(event)">
      &lt;h2>Credentials Management API&lt;/h2>
      &lt;p>&lt;b>Store your credentials:&lt;/b>&lt;/p>
      &lt;p>
        &lt;label>login: &lt;input type="text" name="username" required autocomplete="username">&lt;/label>
        &lt;label>password: &lt;input type="password" name="password" required autocomplete="current-password">&lt;/label>
      &lt;/p>
      &lt;p>&lt;button type="submit">Store credential&lt;/button>&lt;/p>
    
      &lt;p class="user-mediation">
        &lt;b>User mediation:&lt;/b>&lt;br/>
        &lt;label>&lt;input type="radio" name="mediation" value="silent"> silent&lt;/label>
        &lt;label>&lt;input type="radio" name="mediation" value="optional" checked> optional&lt;/label>
        &lt;label>&lt;input type="radio" name="mediation" value="required"> required&lt;/label>
      &lt;/p>
      &lt;p>&lt;button type="button" onclick="requestCredential()">Request credential&lt;/button>&lt;/p>
      &lt;p>&lt;button type="button" onclick="preventSilentAccess()">Prevent silent access (logout)&lt;/button>&lt;/p>
      
      &lt;hr>
      
      &lt;h2>Web OTP API&lt;/h2>
      &lt;p>&lt;button type="button" onclick="waitForSms()">Wait for OTP SMS&lt;/button>&lt;/p>
    &lt;/form>
  &lt;/div>
  &lt;div class="column" id="result">&lt;/div>
&lt;/div></code></pre> </li> </ul> </section> <section aria-hidden=true> <h3>Browser support</h3> <div class=caniuse-report> <div class="svelte-126eukc row"> <div class="svelte-126eukc col-sm-6 ct-chart browsers-chart"></div> <div class="svelte-126eukc col-sm-6 ct-chart overall-chart"></div> </div> <div class="svelte-126eukc row"> <div class="svelte-126eukc legend"> <ul class=svelte-126eukc> <li class=svelte-126eukc><i class="cl-support cl-support-no"></i> No support</li> <li class=svelte-126eukc><i class="cl-support cl-support-partial"></i> Partial support, <a href="http://caniuse.com/#feat=credential-management" rel=noopener target=_blank>see details</a></li> <li class=svelte-126eukc><i class="cl-support cl-support-full"></i> Full support</li> </ul> </div> <div class="svelte-126eukc text-right"> <a href="http://caniuse.com/#feat=credential-management" rel=noopener target=_blank>Data from caniuse.com</a>, <small>CC-BY 4.0 license</small> </div> </div> </div> </section> <section> <h3>Resources</h3> <ul class=resources> <li><a href=https://w3c.github.io/webappsec-credential-management/ rel=noopener target=_blank>Specification Draft</a><li><a href=https://developers.google.com/web/updates/2016/04/credential-management-api rel=noopener target=_blank>Google Developers: Streamlining the Sign-in Flow Using Credential Management API</a><li><a href=https://medium.com/dev-channel/sign-in-on-the-web-credential-management-api-and-best-practices-d21aed14b6fe rel=noopener target=_blank>Sign-in on the Webâ€Šâ€”â€ŠCredential Management API and Best Practices</a><li><a href=https://polykart-credential-payment.appspot.com/ rel=noopener target=_blank>Auto sign-in demo</a><li><a href=https://wicg.github.io/WebOTP/ rel=noopener target=_blank>Web OTP proposal Specification Draft</a></li> </ul> </section> </article> </main> <div class="svelte-p0dnmz loader" aria-hidden=true> <div class="svelte-p0dnmz lds-ellipsis"> <div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div> </div> </div> <div class="svelte-btjd4g container" aria-label="Website footer"> <div class="text-center contact"> <h2 class=svelte-btjd4g>Get in touch</h2> <ul class=svelte-btjd4g> <li class=svelte-btjd4g><a href=mailto:hi@adambar.pl class="svelte-btjd4g icon mail-icon">Mail</a></li> <li class=svelte-btjd4g><a href=https://twitter.com/WhatWebCanDo rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon twitter-icon">Twitter</a></li> <li class=svelte-btjd4g><a href=https://linkedin.com/in/adamrbar rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon linkedin-icon">LinkedIn</a></li> <li class=svelte-btjd4g><a href=https://github.com/NOtherDev/whatwebcando rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon github-icon">GitHub</a></li> </ul> </div> <footer class=svelte-btjd4g role=contentinfo> <p class=text-left><a href=/privacy.html class=svelte-btjd4g>Privacy Policy</a></p> <p class=text-right> Created by <a href=https://adambar.pl rel=noopener target=_blank class=svelte-btjd4g>Adam Bar</a><br> Licenced under <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel="noreferrer noopener" target=_blank class=svelte-btjd4g>CC-BY-SA 4.0</a> </p> </footer> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,]};if('serviceWorker' in navigator) window.addEventListener('load',function(){navigator.serviceWorker.register('/service-worker.js');});(function(){try{eval("async function x(){}");var main="/client/client.813f3e59.js"}catch(e){main="/client/legacy/client.156a0f57.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 