<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs" name=description> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=/Material-Design-Icons.woff rel=preload type=font/woff2 as=font crossorigin=anonymous> <style>@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:local('Source Sans Pro Regular'),local('SourceSansPro-Regular'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:700;font-display:swap;src:local('Source Sans Pro Bold'),local('SourceSansPro-Bold'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Material Design Icons";src:url(/Material-Design-Icons.woff) format("woff");font-weight:400;font-style:normal}</style> <link href=icon-76x76.png rel=apple-touch-icon sizes="60x60 72x72 76x76"> <link href=icon-120x120.png rel=apple-touch-icon sizes="114x114 120x120"> <link href=icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=icon-180x180.png rel=apple-touch-icon sizes="167x167 180x180"> <link href=icon-32x32.png rel=icon sizes="16x16 32x32" type=image/png> <link href=icon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=manifest.json rel=manifest> <link href=client/main.4188134553.css rel=stylesheet><link href=client/[feature].html.2825da7c.css rel=stylesheet><link href=client/prism.3fa19f60.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>What Web Can Do Today: File Access</title> <meta content="What Web Can Do Today: File Access" property=og:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." property=og:description> <meta content=https://whatwebcando.today/files.html property=og:url> <meta content=https://whatwebcando.today/images/share-image.png property=og:image> <meta content="What Web Can Do Today: File Access" name=twitter:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." name=twitter:description> <meta content=https://whatwebcando.today/images/share-image.png name=twitter:image><noscript id=sapper-head-end></noscript> <meta content=yes name=apple-mobile-web-app-capable> <meta content=yes name=mobile-web-app-capable> <meta content="What Web Can Do Today" name=application-name> <meta content="What Web Can Do" name=apple-mobile-web-app-title> <meta content=https://whatwebcando.today/icon-144x144.png name=msapplication-TileImage> <meta content=#ffffff name=theme-color> <meta content=#ffffff name=msapplication-navbutton-color> <meta content=black-translucent name=apple-mobile-web-app-status-bar-style> <meta content=/ name=msapplication-starturl> <meta content=website property=og:type> <meta content=WhatWebCanDo property=og:site_name> <meta content=summary name=twitter:card> <meta content=@WhatWebCanDo name=twitter:site> </head> <body> <div id=sapper> <header class="svelte-1cc53ms text-center"> <nav> <ul class=svelte-1cc53ms> <li class=svelte-1cc53ms><a href=. class=svelte-1cc53ms>Features</a></li> <li class=svelte-1cc53ms><a href=/articles/ class=svelte-1cc53ms>Articles</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#services rel=noopener target=_blank class=svelte-1cc53ms>Services</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#workshops rel=noopener target=_blank class=svelte-1cc53ms>Trainings</a></li> </ul> </nav> <div class="svelte-1cc53ms title-container"> <h1 class=svelte-1cc53ms>What Web Can Do Today?</h1> <p class=svelte-1cc53ms>Can I rely on the Web Platform features to build my app?</p> <p class=svelte-1cc53ms>An overview of the device integration HTML5 APIs</p> </div> </header> <main class="svelte-126eukc page"> <nav aria-label=breadcrumbs class=breadcrumb> <ul> <li><a href=/ >Features</a></li> <li class=is-active><a href=/files.html aria-current=page>File Access</a></li> </ul> </nav> <article> <h2>File Access</h2> <section> <p>The <b>File API</b> gives Web applications an access to the filesystem-level read-only information about the files that the user decides to share with the application, i.e. size, MIME type, modification date, content, without sending the file to the server.<p>The <b>Native File System API</b>, available in Google Chrome via <a href=https://developers.chrome.com/origintrials/#/view_trial/3868592079911256065 rel=noopener target=_blank>origin trial</a> in Spring 2020, aims to make it also possible to write into the file system to the handle chosen in the system-level file opening dialog by the user. The API is in its design phase, breaking changes are still expected.</p> </section> <section> <h3>API glimpse</h3> <div class="language-javascript api-glimpse"><p><b>File API</b></p> <dl> <dt><code>fileInputElement.files</code></dt> <dd>Returns a collection of file objects that were selected by the user using <code>&lt;input type="file"></code>DOM element.</dd> <dt><code>file.name</code></dt> <dd>Returns the original name of the file, without the path.</dd> <dt><code>file.size</code></dt> <dd>Returns the file size in bytes.</dd> <dt><code>file.type</code></dt> <dd>Returns the file's MIME type.</dd> <dt><code>file.lastModifiedDate</code></dt> <dd>Returns the file's last modification date.</dd> <dt><code>const fileReader = new FileReader()</code></dt> <dd>Creates an instance of a class responsible for reading the <code>file</code> content.</dd> <dt><code>fileReader.readAsText(file)</code></dt> <dd>Initiates a process of reading the file and encoding its content as text.</dd> <dt><code>fileReader.addEventListener('load', listener)</code></dt> <dd>An event fired when the reading operation has completed successfully. The data read is available via <code>fileReader.result</code> property.</dd> <dt><code>file.text()</code></dt> <dd>Modern alternative for reading the file and encoding its content as text. Returns a <code>Promise</code> resolved with <code>file</code> content string.</dd> <dt><code>file.arrayBuffer()</code></dt> <dd>Returns a <code>Promise</code> resolved with <code>file</code> content represented as <code>ArrayBuffer</code> instance.</dd> </dl> <p><b>Native File System API (experimental)</b></p> <dl> <dt><code>const handle = await window.chooseFileSystemEntries(options)</code></dt> <dd>Invokes the system-level file picker dialog for <code>options</code> given (i.e. for saving new file or picking files of specific type). Returns a <code>Promise</code> resolved with chosen file handle.</dd> <dt><code>const file = await handle.getFile()</code></dt> <dd>Returns a <code>Promise</code> resolved with chosen handle's <code>File</code> object, as in File API above.</dd> <dt><code>const writer = handle.createWriter()</code></dt> <dd>Returns a <code>Promise</code> resolved with handle's writer object, allowing to write data to the file.</dd> <dt><code>writer.write(start, content)</code></dt> <dd>Writes <code>content</code> to the stream.</dd> <dt><code>writer.close()</code></dt> <dd>Flushes the stream to the file system and closing it. Returns a <code>Promise</code> resolved when the stream has been closed.</dd> </dl></div> </section> <section> <h3>Live Demo</h3> <div class="svelte-126eukc demo-placeholder"> <style>.btn-file{position:relative;overflow:hidden;margin:10px}.btn-file input[type=file]{position:absolute;top:0;right:0;min-width:100%;min-height:100%;opacity:0;outline:0;background:#fff;cursor:inherit;display:block}</style> <div class=columns> <div class=column> <button class=btn-file> Choose some files to read<br>(File API) <input type=file multiple onchange=readFiles(this.files)> </button> <p>Number of selected files: <b id=count>N/A</b></p> </div> <div class=column> <button class=btn-file onclick=writeFile()> Choose file to create or overwrite<br>(Native File System API) </button> </div> </div> <ul id=target></ul> </div> <ul class="svelte-126eukc tabs"> <li class="svelte-126eukc tab"> <input type=radio class=svelte-126eukc id=demo-code-js name=tabs checked> <label class=svelte-126eukc for=demo-code-js>JavaScript</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-js><code class=language-javascript>function getReadFile(reader, i) {
  return function () {
    var li = document.querySelector('[data-idx="' + i + '"]');

    li.innerHTML += 'File starts with "' + reader.result.substr(0, 25) + '"';
  }
}

function readFiles(files) {
  document.getElementById('count').innerHTML = files.length;

  var target = document.getElementById('target');
  target.innerHTML = '';

  for (var i = 0; i &lt; files.length; ++i) {
    var item = document.createElement('li');
    item.setAttribute('data-idx', i);
    var file = files[i];

    var reader = new FileReader();
    reader.addEventListener('load', getReadFile(reader, i));
    reader.readAsText(file);

    item.innerHTML = '&lt;b>' + file.name + '&lt;/b>, ' + file.type + ', ' + file.size + ' bytes, last modified ' + file.lastModifiedDate + '&lt;br>';
    target.appendChild(item);
  };
}

async function writeFile() {
  if (!window.chooseFileSystemEntries) {
    alert('Native File System API not supported');
    return;
  }
  
  const target = document.getElementById('target');
  target.innerHTML = 'Opening file handle...';
  
  const handle = await window.chooseFileSystemEntries({
    type: 'save-file',
  });
  
  const file = await handle.getFile()
  const writer = await handle.createWriter();
  await writer.write(0, 'Hello world from What Web Can Do!');
  await writer.close()
  
  target.innerHTML = 'Test content written to &lt;b>' + file.name + '&lt;/b>.';
}</code></pre> </li> <li class="svelte-126eukc tab"> <input type=radio class=svelte-126eukc id=demo-code-html name=tabs> <label class=svelte-126eukc for=demo-code-html>HTML</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-html><code class=language-html>&lt;div class="columns">
  &lt;div class="column">
    &lt;button class="btn-file">
      Choose some files to read&lt;br>(File API) &lt;input type="file" onchange="readFiles(this.files)" multiple>
    &lt;/button>
    
    &lt;p>Number of selected files: &lt;b id="count">N/A&lt;/b>&lt;/p>
  &lt;/div>
  &lt;div class="column">
    &lt;button class="btn-file" onclick="writeFile()">
      Choose file to create or overwrite&lt;br>(Native File System API)
    &lt;/button>
  &lt;/div>
&lt;/div>

&lt;ul id="target">&lt;/ul></code></pre> </li> <li class="svelte-126eukc tab"> <input type=radio class=svelte-126eukc id=demo-code-css name=tabs> <label class=svelte-126eukc for=demo-code-css>CSS</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-css><code class=language-css>.btn-file {
    position: relative;
    overflow: hidden;
    margin: 10px;
}
.btn-file input[type=file] {
    position: absolute;
    top: 0;
    right: 0;
    min-width: 100%;
    min-height: 100%;
    opacity: 0;
    outline: none;
    background: #fff;
    cursor: inherit;
    display: block;
}</code></pre> </li> </ul> </section> <section aria-hidden=true> <h3>Browser support</h3> <div class=caniuse-report> <div class="svelte-126eukc row"> <div class="svelte-126eukc col-sm-6 ct-chart browsers-chart"></div> <div class="svelte-126eukc col-sm-6 ct-chart overall-chart"></div> </div> <div class="svelte-126eukc row"> <div class="svelte-126eukc legend"> <ul class=svelte-126eukc> <li class=svelte-126eukc><i class="cl-support cl-support-no"></i> No support</li> <li class=svelte-126eukc><i class="cl-support cl-support-partial"></i> Partial support, <a href="http://caniuse.com/#feat=fileapi" rel=noopener target=_blank>see details</a></li> <li class=svelte-126eukc><i class="cl-support cl-support-full"></i> Full support</li> </ul> </div> <div class="svelte-126eukc text-right"> <a href="http://caniuse.com/#feat=fileapi" rel=noopener target=_blank>Data from caniuse.com</a>, <small>CC-BY 4.0 license</small> </div> </div> </div> </section> <section> <h3>Resources</h3> <ul class=resources> <li><a href=https://w3c.github.io/FileAPI/ rel=noopener target=_blank>Specification Draft</a><li><a href=https://web.dev/native-file-system/ rel=noopener target=_blank>The Native File System API: Simplifying access to local files</a><li><a href=https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications rel=noopener target=_blank>MDN: Using files from Web applications</a><li><a href=http://www.html5rocks.com/en/tutorials/file/dndfiles/ rel=noopener target=_blank>Reading files in JavaScript using the File APIs</a></li> </ul> </section> </article> </main> <div class="svelte-p0dnmz loader" aria-hidden=true> <div class="svelte-p0dnmz lds-ellipsis"> <div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div> </div> </div> <div class="svelte-btjd4g container" aria-label="Website footer"> <div class="text-center contact"> <h2 class=svelte-btjd4g>Get in touch</h2> <ul class=svelte-btjd4g> <li class=svelte-btjd4g><a href=mailto:hi@adambar.pl class="svelte-btjd4g icon mail-icon">Mail</a></li> <li class=svelte-btjd4g><a href=https://twitter.com/WhatWebCanDo rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon twitter-icon">Twitter</a></li> <li class=svelte-btjd4g><a href=https://linkedin.com/in/adamrbar rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon linkedin-icon">LinkedIn</a></li> <li class=svelte-btjd4g><a href=https://github.com/NOtherDev/whatwebcando rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon github-icon">GitHub</a></li> </ul> </div> <footer class=svelte-btjd4g role=contentinfo> <p class=text-left><a href=/privacy.html class=svelte-btjd4g>Privacy Policy</a></p> <p class=text-right> Created by <a href=https://adambar.pl rel=noopener target=_blank class=svelte-btjd4g>Adam Bar</a><br> Licenced under <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel="noreferrer noopener" target=_blank class=svelte-btjd4g>CC-BY-SA 4.0</a> </p> </footer> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,]};if('serviceWorker' in navigator) window.addEventListener('load',function(){navigator.serviceWorker.register('/service-worker.js');});(function(){try{eval("async function x(){}");var main="/client/client.813f3e59.js"}catch(e){main="/client/legacy/client.156a0f57.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 