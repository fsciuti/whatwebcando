<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs" name=description> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=/Material-Design-Icons.woff rel=preload type=font/woff2 as=font crossorigin=anonymous> <style>@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:local('Source Sans Pro Regular'),local('SourceSansPro-Regular'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:700;font-display:swap;src:local('Source Sans Pro Bold'),local('SourceSansPro-Bold'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Material Design Icons";src:url(/Material-Design-Icons.woff) format("woff");font-weight:400;font-style:normal}</style> <link href=icon-76x76.png rel=apple-touch-icon sizes="60x60 72x72 76x76"> <link href=icon-120x120.png rel=apple-touch-icon sizes="114x114 120x120"> <link href=icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=icon-180x180.png rel=apple-touch-icon sizes="167x167 180x180"> <link href=icon-32x32.png rel=icon sizes="16x16 32x32" type=image/png> <link href=icon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=manifest.json rel=manifest> <link href=client/main.4188134553.css rel=stylesheet><link href=client/[feature].html.2825da7c.css rel=stylesheet><link href=client/prism.3fa19f60.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>What Web Can Do Today: Payments</title> <meta content="What Web Can Do Today: Payments" property=og:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." property=og:description> <meta content=https://whatwebcando.today/payments.html property=og:url> <meta content=https://whatwebcando.today/images/share-image.png property=og:image> <meta content="What Web Can Do Today: Payments" name=twitter:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." name=twitter:description> <meta content=https://whatwebcando.today/images/share-image.png name=twitter:image><noscript id=sapper-head-end></noscript> <meta content=yes name=apple-mobile-web-app-capable> <meta content=yes name=mobile-web-app-capable> <meta content="What Web Can Do Today" name=application-name> <meta content="What Web Can Do" name=apple-mobile-web-app-title> <meta content=https://whatwebcando.today/icon-144x144.png name=msapplication-TileImage> <meta content=#ffffff name=theme-color> <meta content=#ffffff name=msapplication-navbutton-color> <meta content=black-translucent name=apple-mobile-web-app-status-bar-style> <meta content=/ name=msapplication-starturl> <meta content=website property=og:type> <meta content=WhatWebCanDo property=og:site_name> <meta content=summary name=twitter:card> <meta content=@WhatWebCanDo name=twitter:site> </head> <body> <div id=sapper> <header class="svelte-1cc53ms text-center"> <nav> <ul class=svelte-1cc53ms> <li class=svelte-1cc53ms><a href=. class=svelte-1cc53ms>Features</a></li> <li class=svelte-1cc53ms><a href=/articles/ class=svelte-1cc53ms>Articles</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#services rel=noopener target=_blank class=svelte-1cc53ms>Services</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#workshops rel=noopener target=_blank class=svelte-1cc53ms>Trainings</a></li> </ul> </nav> <div class="svelte-1cc53ms title-container"> <h1 class=svelte-1cc53ms>What Web Can Do Today?</h1> <p class=svelte-1cc53ms>Can I rely on the Web Platform features to build my app?</p> <p class=svelte-1cc53ms>An overview of the device integration HTML5 APIs</p> </div> </header> <main class="svelte-126eukc page"> <nav aria-label=breadcrumbs class=breadcrumb> <ul> <li><a href=/ >Features</a></li> <li class=is-active><a href=/payments.html aria-current=page>Payments</a></li> </ul> </nav> <article> <h2>Payments</h2> <section> <p>The <b>Payment Request API</b> allows Web applications to delegate the payment checkout process to the operating system, allowing it to use whatever methods and payment providers are natively available for the platform and configured for the user. This approach takes away the burden of handling complex checkout flows at the application side, reduces the scope of the payment provider integration and ensures better familiarity for the user.<p>With <code>supportedMethods</code> parameter the API allows the Web application to select the supported payment methods - for example only to allow payments processed by a specific 3rd-party provider - as well as configure its parameters. Methods are specified by the predefined identifier or by the 3rd-party URL. Note that the behaviors of the payment methods might vary as it can be defined by a 3rd-party. For example, it can only collect the required details and return it to the requesting Web application, or it might as well proceed with the actual money transfer as a part of the flow.<p>At the time, no predefined payments providers exists, although there is a partial browser support for a deprecated <code>basic-card</code> provider that used to exist in the standard and was responsible for collecting the credit card data, without processing the payment itself. It was <a href="https://groups.google.com/a/chromium.org/g/blink-dev/c/fLpgY6iLibo/m/8FpouUKiBAAJ?pli=1" rel=noopener target=_blank>deprecated in Aug 2021</a>.<p>With <code>details</code> parameter the Web application should specify the total amount and currency of the payment. It also allows setting up the order summary information including the subtotals, order items and shipping options.<p>With <code>options</code> parameter the Web application might specify what kind of customer data it requires to be able to fulfill the request. It may require a shipping address (<code>requestShipping</code>), email (<code>requestPayerEmail</code>), phone (<code>requestPayerPhone</code>) or name (<code>requestPayerName</code>).<p>The only payment method available on iOS devices is <a href=https://www.apple.com/apple-pay/ rel=noopener target=_blank>Apple Pay</a> and it is only functional on devices with fingerprint authentication (Touch ID). It is accessible both via the standard Payment Request API described here as well as the older proprietary non-standard <code>ApplePaySession</code> API.</p> </section> <section> <h3>API glimpse</h3> <div class="language-javascript api-glimpse"><dl> <dt><code>paymentRequest = new PaymentRequest(paymentMethods, details, options)</code></dt> <dd>Creates a payment request object with the requested amounts, currencies and methods configured.</dd> <dt><code>paymentRequest.canMakePayment()</code></dt> <dd>Returns a <code>Promise</code> resolved with the value indicating if it is possible to conduct a payment using any of the <code>paymentMethods</code> specified.</dd> <dt><code>paymentRequest.show()</code></dt> <dd>Presents the checkout confirmation UI to the user or redirects to the system-defined application that accepts payments by a method selected. Returns a <code>Promise</code> resolved with the <code>response</code> object when the payment is successfully confirmed by the payment provider. Note that it may or may not already denote the money being transferred - it depends on the selected payment method implementation.</dd> <dt><code>request.addEventListener('shippingaddresschange', listener)</code></dt> <dd>An event fired when the user changes the shipping address data, allowing updating the request's <code>details</code> using <code>event.updateWith()</code> method.</dd> <dt><code>request.addEventListener('shippingoptionchange', listener)</code></dt> <dd>An event fired when the user changes the shipping options (delivery vs. pickup etc.), allowing updating the request's <code>details</code> using <code>event.updateWith()</code> method.</dd> <dt><code>event.updateWith(promise)</code></dt> <dd>Waits for a <code>promise</code> to resolve with the new payment details and puts it into the request's <code>details</code>.</dd> <dt><code>response.toJSON()</code></dt> <dd>A convenience method that serializes the payment response (including the requested payment details and the data returned by the provider) into JSON intended to be sent to server-side for order processing.</dd> <dt><code>response.complete(result)</code></dt> <dd>Signals the browser that the app-specific steps of payment processing (like sending the order data to the server-side) has completed. Returns a <code>Promise</code> resolved when the Payment Request UI is cleared.</dd> </dl></div> </section> <section> <h3>Live Demo</h3> <div class="svelte-126eukc demo-placeholder"> <style></style> <p><button onclick=donate()>Donate 10â‚¬ to What Web Can Do ðŸ˜‰</button> (demo only, no actual payment is processed)</p> <p id=log></p> <p><small>Demo based on <a href=https://googlechrome.github.io/samples/paymentrequest/credit-cards/ >Google Chrome GitHub repository</a>.</small></p> </div> <ul class="svelte-126eukc tabs"> <li class="svelte-126eukc tab"> <input class=svelte-126eukc id=demo-code-js name=tabs type=radio checked> <label class=svelte-126eukc for=demo-code-js>JavaScript</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-js><code class=language-javascript>/**
 * Builds PaymentRequest for credit cards, but does not show any UI yet.
 */
function initPaymentRequest() {
  let networks = ['amex', 'jcb', 'visa', 'maestro', 'mastercard'];
  
  let supportedInstruments = [{
    supportedMethods: 'basic-card', // note that this method is deprecated and its support will be removed
    data: {
      supportedNetworks: networks, 
    }
  }, {
    supportedMethods: 'https://apple.com/apple-pay',
    data: {
        version: 2,
        supportedNetworks: networks,
        countryCode: 'US',
        merchantIdentifier: 'whatwebcando.today.sample',
        merchantCapabilities: ['supportsDebit', 'supportsCredit', 'supports3DS']
    }
  }];

  let details = {
    total: {label: 'Donation', amount: {currency: 'EUR', value: '10.00'}},
    displayItems: [
      {
        label: 'Original donation amount',
        amount: {currency: 'EUR', value: '15.00'}
      },
      {
        label: 'Friends and family discount',
        amount: {currency: 'EUR', value: '-5.00'}
      }
    ]
  };

  return new PaymentRequest(supportedInstruments, details);
}

/**
 * Invokes PaymentRequest for credit cards.
 */
function onBuyClicked(request) {
  request.show()
    .then(instrumentResponse => sendPaymentToServer(instrumentResponse))
    .catch(err => document.getElementById('log').innerText = err);
}

/**
 * Simulates processing the payment data on the server.
 */
function sendPaymentToServer(instrumentResponse) {
  // There's no server-side component of these samples. No transactions are
  // processed and no money exchanged hands. Instantaneous transactions are not
  // realistic. Add a 2 second delay to make it seem more real.
  
  window.setTimeout(function () {
    instrumentResponse.complete('success')
        .then(() => document.getElementById('log').innerHTML = resultToTable(instrumentResponse))
        .catch(err => document.getElementById('log').innerText = err);
  }, 2000);
}

/**
 * Converts the payment instrument into a JSON string.
 */
function resultToTable(result) {
  return '&lt;table class="table table-striped">' +
    '&lt;tr>&lt;td>Method name&lt;/td>&lt;td>' + result.methodName + '&lt;/td>&lt;/tr>' +
    '&lt;tr>&lt;td>Billing address&lt;/td>&lt;td>' + (result.details.billingAddress || {}).addressLine + ', ' + (result.details.billingAddress || {}).city + '&lt;/td>&lt;/tr>' +
    '&lt;tr>&lt;td>Card number&lt;/td>&lt;td>' + result.details.cardNumber + '&lt;/td>&lt;/tr>' +
    '&lt;tr>&lt;td>Security code&lt;/td>&lt;td>' + result.details.cardSecurityCode + '&lt;/td>&lt;/tr>' +
    '&lt;tr>&lt;td>Cardholder name&lt;/td>&lt;td>' + result.details.cardholderName + '&lt;/td>&lt;/tr>' +
    '&lt;tr>&lt;td>Expiry date&lt;/td>&lt;td>' + result.details.expiryMonth + '/' + result.details.expiryYear + '&lt;/td>&lt;/tr>' +
    '&lt;/table>';
}

function donate() {
  if (!window.PaymentRequest) {
    alert('This browser does not support Web Payments API');
    return;
  }
    
  let request = initPaymentRequest();
  onBuyClicked(request);
}</code></pre> </li> <li class="svelte-126eukc tab"> <input class=svelte-126eukc id=demo-code-html name=tabs type=radio> <label class=svelte-126eukc for=demo-code-html>HTML</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-html><code class=language-html>&lt;p>&lt;button onclick="donate()">Donate 10â‚¬ to What Web Can Do ðŸ˜‰&lt;/button> (demo only, no actual payment is processed)&lt;/p>

&lt;p id="log">&lt;/p>

&lt;p>&lt;small>Demo based on &lt;a href="https://googlechrome.github.io/samples/paymentrequest/credit-cards/">Google Chrome GitHub repository&lt;/a>.&lt;/small>&lt;/p></code></pre> </li> </ul> </section> <section aria-hidden=true> <h3>Browser support</h3> <div class=caniuse-report> <div class="svelte-126eukc row"> <div class="svelte-126eukc col-sm-6 ct-chart browsers-chart"></div> <div class="svelte-126eukc col-sm-6 ct-chart overall-chart"></div> </div> <div class="svelte-126eukc row"> <div class="svelte-126eukc legend"> <ul class=svelte-126eukc> <li class=svelte-126eukc><i class="cl-support cl-support-no"></i> No support</li> <li class=svelte-126eukc><i class="cl-support cl-support-partial"></i> Partial support, <a href="http://caniuse.com/#feat=payment-request" rel=noopener target=_blank>see details</a></li> <li class=svelte-126eukc><i class="cl-support cl-support-full"></i> Full support</li> </ul> </div> <div class="svelte-126eukc text-right"> <a href="http://caniuse.com/#feat=payment-request" rel=noopener target=_blank>Data from caniuse.com</a>, <small>CC-BY 4.0 license</small> </div> </div> </div> </section> <section> <h3>Resources</h3> <ul class=resources> <li><a href=https://www.w3.org/TR/payment-request/ rel=noopener target=_blank>Specification</a><li><a href=https://developers.google.com/web/fundamentals/payments/ rel=noopener target=_blank>Google Developers: Introducing the Payment Request API</a><li><a href=https://developers.google.com/web/fundamentals/payments/deep-dive-into-payment-request rel=noopener target=_blank>Google Developers: Deep Dive into the Payment Request API</a></li> </ul> </section> </article> </main> <div class="svelte-p0dnmz loader" aria-hidden=true> <div class="svelte-p0dnmz lds-ellipsis"> <div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div> </div> </div> <div class="svelte-btjd4g container" aria-label="Website footer"> <div class="text-center contact"> <h2 class=svelte-btjd4g>Get in touch</h2> <ul class=svelte-btjd4g> <li class=svelte-btjd4g><a href=mailto:hi@adambar.pl class="svelte-btjd4g icon mail-icon">Mail</a></li> <li class=svelte-btjd4g><a href=https://twitter.com/WhatWebCanDo rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon twitter-icon">Twitter</a></li> <li class=svelte-btjd4g><a href=https://linkedin.com/in/adamrbar rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon linkedin-icon">LinkedIn</a></li> <li class=svelte-btjd4g><a href=https://github.com/NOtherDev/whatwebcando rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon github-icon">GitHub</a></li> </ul> </div> <footer class=svelte-btjd4g role=contentinfo> <p class=text-left><a href=/privacy.html class=svelte-btjd4g>Privacy Policy</a></p> <p class=text-right> Created by <a href=https://adambar.pl rel=noopener target=_blank class=svelte-btjd4g>Adam Bar</a><br> Licenced under <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel="noreferrer noopener" target=_blank class=svelte-btjd4g>CC-BY-SA 4.0</a> </p> </footer> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,]};if('serviceWorker' in navigator) window.addEventListener('load',function(){navigator.serviceWorker.register('/service-worker.js');});(function(){try{eval("async function x(){}");var main="/client/client.813f3e59.js"}catch(e){main="/client/legacy/client.156a0f57.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 