<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs" name=description> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=/Material-Design-Icons.woff rel=preload type=font/woff2 as=font crossorigin=anonymous> <style>@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:local('Source Sans Pro Regular'),local('SourceSansPro-Regular'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:700;font-display:swap;src:local('Source Sans Pro Bold'),local('SourceSansPro-Bold'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Material Design Icons";src:url(/Material-Design-Icons.woff) format("woff");font-weight:400;font-style:normal}</style> <link href=icon-76x76.png rel=apple-touch-icon sizes="60x60 72x72 76x76"> <link href=icon-120x120.png rel=apple-touch-icon sizes="114x114 120x120"> <link href=icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=icon-180x180.png rel=apple-touch-icon sizes="167x167 180x180"> <link href=icon-32x32.png rel=icon sizes="16x16 32x32" type=image/png> <link href=icon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=manifest.json rel=manifest> <link href=client/main.4188134553.css rel=stylesheet><link href=client/[feature].html.2825da7c.css rel=stylesheet><link href=client/prism.3fa19f60.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>What Web Can Do Today: Permissions</title> <meta content="What Web Can Do Today: Permissions" property=og:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." property=og:description> <meta content=https://whatwebcando.today/permissions.html property=og:url> <meta content=https://whatwebcando.today/images/share-image.png property=og:image> <meta content="What Web Can Do Today: Permissions" name=twitter:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." name=twitter:description> <meta content=https://whatwebcando.today/images/share-image.png name=twitter:image><noscript id=sapper-head-end></noscript> <meta content=yes name=apple-mobile-web-app-capable> <meta content=yes name=mobile-web-app-capable> <meta content="What Web Can Do Today" name=application-name> <meta content="What Web Can Do" name=apple-mobile-web-app-title> <meta content=https://whatwebcando.today/icon-144x144.png name=msapplication-TileImage> <meta content=#ffffff name=theme-color> <meta content=#ffffff name=msapplication-navbutton-color> <meta content=black-translucent name=apple-mobile-web-app-status-bar-style> <meta content=/ name=msapplication-starturl> <meta content=website property=og:type> <meta content=WhatWebCanDo property=og:site_name> <meta content=summary name=twitter:card> <meta content=@WhatWebCanDo name=twitter:site> </head> <body> <div id=sapper> <header class="svelte-1cc53ms text-center"> <nav> <ul class=svelte-1cc53ms> <li class=svelte-1cc53ms><a href=. class=svelte-1cc53ms>Features</a></li> <li class=svelte-1cc53ms><a href=/articles/ class=svelte-1cc53ms>Articles</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#services rel=noopener target=_blank class=svelte-1cc53ms>Services</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#workshops rel=noopener target=_blank class=svelte-1cc53ms>Trainings</a></li> </ul> </nav> <div class="svelte-1cc53ms title-container"> <h1 class=svelte-1cc53ms>What Web Can Do Today?</h1> <p class=svelte-1cc53ms>Can I rely on the Web Platform features to build my app?</p> <p class=svelte-1cc53ms>An overview of the device integration HTML5 APIs</p> </div> </header> <main class="svelte-126eukc page"> <nav aria-label=breadcrumbs class=breadcrumb> <ul> <li><a href=/ >Features</a></li> <li class=is-active><a href=/permissions.html aria-current=page>Permissions</a></li> </ul> </nav> <article> <h2>Permissions</h2> <section> <p>The <b>Permissions API</b> provides the uniform way for Web applications to query for the permission status for the features that might require user consent, like notifications or geolocation. With Permissions API the app can list the permissions granted by the user without actually triggering the feature itself.</p> </section> <section> <h3>API glimpse</h3> <div class="language-javascript api-glimpse"><dl> <dt><code>navigator.permissions.query({name: feature})</code></dt> <dd>Returns a <code>Promise</code> resolved with the object representing the permission status of the requested feature.</dd> <dt><code>permissionStatus.state</code></dt> <dd>Returns the permission status of the requested feature, either <code>granted</code>, <code>denied</code> or - in case the user was not yet asked - <code>prompt</code>.</dd> <dt><code>permissionStatus.addEventListener('change', listener)</code></dt> <dd>An event fired when the permission status of the requested feature has changed.</dd> </dl></div> </section> <section> <h3>Live Demo</h3> <div class="svelte-126eukc demo-placeholder"> <style>.demo-placeholder{overflow:hidden}#logTarget,.demo-placeholder div{float:left;width:50%}</style> <div> <p> <b><a href=/geolocation.html>Geolocation</a></b> permission status is <b id=geolocation-status>unknown</b>. <button onclick=requestGeolocation()>Request</button> </p> <p> <b><a href=/local-notifications.html>Notifications</a></b> permission status is <b id=notifications-status>unknown</b>. <button onclick=requestNotifications()>Request</button> </p> <p> <b><a href=/push-notifications.html>Push</a></b> permission status is <b id=push-status>unknown</b>. <button onclick=requestPush()>Request</button> </p> <p> <b>Midi</b> permission status is <b id=midi-status>unknown</b>. <button onclick=requestMidi()>Request</button> </p> <p> <b><a href=/camera-microphone.html>Camera</a></b> permission status is <b id=camera-status>unknown</b>. <button onclick=requestCamera()>Request</button> </p> <p> <b><a href=/camera-microphone.html>Microphone</a></b> permission status is <b id=microphone-status>unknown</b>. <button onclick=requestMicrophone()>Request</button> </p> <p> <b><a href=/background-sync.html>Background Sync</a></b> permission status is <b id=background-sync-status>unknown</b>. </p> <p> <b><a href=/ambient-light.html>Ambient Light Sensor</a></b> permission status is <b id=ambient-light-sensor-status>unknown</b>. </p> <p> <b><a href=/device-motion.html>Accelerometer</a></b> permission status is <b id=accelerometer-status>unknown</b>. </p> <p> <b><a href=/device-motion.html>Gyroscope</a></b> permission status is <b id=gyroscope-status>unknown</b>. </p> <p> <b><a href=/device-motion.html>Magnetometer</a></b> permission status is <b id=magnetometer-status>unknown</b>. </p> </div> <p id=logTarget></p> </div> <ul class="svelte-126eukc tabs"> <li class="svelte-126eukc tab"> <input class=svelte-126eukc id=demo-code-js name=tabs type=radio checked> <label class=svelte-126eukc for=demo-code-js>JavaScript</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-js><code class=language-javascript>if ('permissions' in navigator) {
  var logTarget = document.getElementById('logTarget');

  function handleChange(permissionName, newState) {
    var timeBadge = new Date().toTimeString().split(' ')[0];
    var newStateInfo = document.createElement('p');
    newStateInfo.innerHTML = '&lt;span class="badge">' + timeBadge + '&lt;/span> State of &lt;b>' + permissionName + '&lt;/b> permission status changed to &lt;b>' + newState + '&lt;/b>.';
    logTarget.appendChild(newStateInfo);
  }

  function checkPermission(permissionName, descriptor) {
    try {
    navigator.permissions.query(Object.assign({name: permissionName}, descriptor))
      .then(function (permission) {
        document.getElementById(permissionName + '-status').innerHTML = permission.state;
        permission.addEventListener('change', function (e) {
          document.getElementById(permissionName + '-status').innerHTML = permission.state;
          handleChange(permissionName, permission.state);
        });
      });
    } catch (e) {
    }
  }

  checkPermission('geolocation');
  checkPermission('notifications');
  checkPermission('push', {userVisibleOnly: true});
  checkPermission('midi', {sysex: true});
  checkPermission('camera');
  checkPermission('microphone');
  checkPermission('background-sync');
  checkPermission('ambient-light-sensor');
  checkPermission('accelerometer');
  checkPermission('gyroscope');
  checkPermission('magnetometer');

  var noop = function () {};
  navigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);
  
  function requestGeolocation() {
    navigator.geolocation.getCurrentPosition(noop);
  }

  function requestNotifications() {
    Notification.requestPermission();
  }

  function requestPush() {
    navigator.serviceWorker.getRegistration()
      .then(function (serviceWorkerRegistration) {
        serviceWorkerRegistration.pushManager.subscribe();
      });
  }

  function requestMidi() {
    navigator.requestMIDIAccess({sysex: true});
  }
  
  function requestCamera() {
    navigator.getUserMedia({video: true}, noop, noop)
  }
  
  function requestMicrophone() {
    navigator.getUserMedia({audio: true}, noop, noop)
  }
}</code></pre> </li> <li class="svelte-126eukc tab"> <input class=svelte-126eukc id=demo-code-html name=tabs type=radio> <label class=svelte-126eukc for=demo-code-html>HTML</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-html><code class=language-html>&lt;div>
  &lt;p>
    &lt;b>&lt;a href="/geolocation.html">Geolocation&lt;/a>&lt;/b> permission status is &lt;b id="geolocation-status">unknown&lt;/b>.
    
    &lt;button onclick="requestGeolocation()">Request&lt;/button>
  &lt;/p>
  &lt;p>
    &lt;b>&lt;a href="/local-notifications.html">Notifications&lt;/a>&lt;/b> permission status is &lt;b id="notifications-status">unknown&lt;/b>.
    
    &lt;button onclick="requestNotifications()">Request&lt;/button>
  &lt;/p>
  &lt;p>
    &lt;b>&lt;a href="/push-notifications.html">Push&lt;/a>&lt;/b> permission status is &lt;b id="push-status">unknown&lt;/b>.
    
    &lt;button onclick="requestPush()">Request&lt;/button>
  &lt;/p>
  &lt;p>
    &lt;b>Midi&lt;/b> permission status is &lt;b id="midi-status">unknown&lt;/b>.
    
    &lt;button onclick="requestMidi()">Request&lt;/button>
  &lt;/p>
  &lt;p>
    &lt;b>&lt;a href="/camera-microphone.html">Camera&lt;/a>&lt;/b> permission status is &lt;b id="camera-status">unknown&lt;/b>.
    
    &lt;button onclick="requestCamera()">Request&lt;/button>
  &lt;/p>
  &lt;p>
    &lt;b>&lt;a href="/camera-microphone.html">Microphone&lt;/a>&lt;/b> permission status is &lt;b id="microphone-status">unknown&lt;/b>.
    
    &lt;button onclick="requestMicrophone()">Request&lt;/button>
  &lt;/p>
  &lt;p>
    &lt;b>&lt;a href="/background-sync.html">Background Sync&lt;/a>&lt;/b> permission status is &lt;b id="background-sync-status">unknown&lt;/b>.
  &lt;/p>
  &lt;p>
    &lt;b>&lt;a href="/ambient-light.html">Ambient Light Sensor&lt;/a>&lt;/b> permission status is &lt;b id="ambient-light-sensor-status">unknown&lt;/b>.
  &lt;/p>
  &lt;p>
    &lt;b>&lt;a href="/device-motion.html">Accelerometer&lt;/a>&lt;/b> permission status is &lt;b id="accelerometer-status">unknown&lt;/b>.
  &lt;/p>
  &lt;p>
    &lt;b>&lt;a href="/device-motion.html">Gyroscope&lt;/a>&lt;/b> permission status is &lt;b id="gyroscope-status">unknown&lt;/b>.
  &lt;/p>
  &lt;p>
    &lt;b>&lt;a href="/device-motion.html">Magnetometer&lt;/a>&lt;/b> permission status is &lt;b id="magnetometer-status">unknown&lt;/b>.
  &lt;/p>
&lt;/div>

&lt;p id="logTarget">&lt;/p></code></pre> </li> </ul> </section> <section aria-hidden=true> <h3>Browser support</h3> <div class=caniuse-report> <div class="svelte-126eukc row"> <div class="svelte-126eukc col-sm-6 ct-chart browsers-chart"></div> <div class="svelte-126eukc col-sm-6 ct-chart overall-chart"></div> </div> <div class="svelte-126eukc row"> <div class="svelte-126eukc legend"> <ul class=svelte-126eukc> <li class=svelte-126eukc><i class="cl-support cl-support-no"></i> No support</li> <li class=svelte-126eukc><i class="cl-support cl-support-partial"></i> Partial support, <a href="http://caniuse.com/#feat=permissions-api" rel=noopener target=_blank>see details</a></li> <li class=svelte-126eukc><i class="cl-support cl-support-full"></i> Full support</li> </ul> </div> <div class="svelte-126eukc text-right"> <a href="http://caniuse.com/#feat=permissions-api" rel=noopener target=_blank>Data from caniuse.com</a>, <small>CC-BY 4.0 license</small> </div> </div> </div> </section> <section> <h3>Resources</h3> <ul class=resources> <li><a href=https://w3c.github.io/permissions/ rel=noopener target=_blank>Specification Draft</a><li><a href=https://developers.google.com/web/updates/2015/04/permissions-api-for-the-web rel=noopener target=_blank>Permissions API for the Web</a><li><a href=https://permission.site rel=noopener target=_blank>Permissions Demo</a></li> </ul> </section> </article> </main> <div class="svelte-p0dnmz loader" aria-hidden=true> <div class="svelte-p0dnmz lds-ellipsis"> <div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div> </div> </div> <div class="svelte-btjd4g container" aria-label="Website footer"> <div class="text-center contact"> <h2 class=svelte-btjd4g>Get in touch</h2> <ul class=svelte-btjd4g> <li class=svelte-btjd4g><a href=mailto:hi@adambar.pl class="svelte-btjd4g icon mail-icon">Mail</a></li> <li class=svelte-btjd4g><a href=https://twitter.com/WhatWebCanDo rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon twitter-icon">Twitter</a></li> <li class=svelte-btjd4g><a href=https://linkedin.com/in/adamrbar rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon linkedin-icon">LinkedIn</a></li> <li class=svelte-btjd4g><a href=https://github.com/NOtherDev/whatwebcando rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon github-icon">GitHub</a></li> </ul> </div> <footer class=svelte-btjd4g role=contentinfo> <p class=text-left><a href=/privacy.html class=svelte-btjd4g>Privacy Policy</a></p> <p class=text-right> Created by <a href=https://adambar.pl rel=noopener target=_blank class=svelte-btjd4g>Adam Bar</a><br> Licenced under <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel="noreferrer noopener" target=_blank class=svelte-btjd4g>CC-BY-SA 4.0</a> </p> </footer> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,]};if('serviceWorker' in navigator) window.addEventListener('load',function(){navigator.serviceWorker.register('/service-worker.js');});(function(){try{eval("async function x(){}");var main="/client/client.813f3e59.js"}catch(e){main="/client/legacy/client.156a0f57.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 