<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs" name=description> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=/Material-Design-Icons.woff rel=preload type=font/woff2 as=font crossorigin=anonymous> <style>@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:local('Source Sans Pro Regular'),local('SourceSansPro-Regular'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:700;font-display:swap;src:local('Source Sans Pro Bold'),local('SourceSansPro-Bold'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Material Design Icons";src:url(/Material-Design-Icons.woff) format("woff");font-weight:400;font-style:normal}</style> <link href=icon-76x76.png rel=apple-touch-icon sizes="60x60 72x72 76x76"> <link href=icon-120x120.png rel=apple-touch-icon sizes="114x114 120x120"> <link href=icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=icon-180x180.png rel=apple-touch-icon sizes="167x167 180x180"> <link href=icon-32x32.png rel=icon sizes="16x16 32x32" type=image/png> <link href=icon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=manifest.json rel=manifest> <link href=client/main.4188134553.css rel=stylesheet><link href=client/[feature].html.2825da7c.css rel=stylesheet><link href=client/prism.3fa19f60.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>What Web Can Do Today: Task Scheduling</title> <meta content="What Web Can Do Today: Task Scheduling" property=og:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." property=og:description> <meta content=https://whatwebcando.today/scheduler.html property=og:url> <meta content=https://whatwebcando.today/images/share-image.png property=og:image> <meta content="What Web Can Do Today: Task Scheduling" name=twitter:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." name=twitter:description> <meta content=https://whatwebcando.today/images/share-image.png name=twitter:image><noscript id=sapper-head-end></noscript> <meta content=yes name=apple-mobile-web-app-capable> <meta content=yes name=mobile-web-app-capable> <meta content="What Web Can Do Today" name=application-name> <meta content="What Web Can Do" name=apple-mobile-web-app-title> <meta content=https://whatwebcando.today/icon-144x144.png name=msapplication-TileImage> <meta content=#ffffff name=theme-color> <meta content=#ffffff name=msapplication-navbutton-color> <meta content=black-translucent name=apple-mobile-web-app-status-bar-style> <meta content=/ name=msapplication-starturl> <meta content=website property=og:type> <meta content=WhatWebCanDo property=og:site_name> <meta content=summary name=twitter:card> <meta content=@WhatWebCanDo name=twitter:site> </head> <body> <div id=sapper> <header class="svelte-1cc53ms text-center"> <nav> <ul class=svelte-1cc53ms> <li class=svelte-1cc53ms><a href=. class=svelte-1cc53ms>Features</a></li> <li class=svelte-1cc53ms><a href=/articles/ class=svelte-1cc53ms>Articles</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#services rel=noopener target=_blank class=svelte-1cc53ms>Services</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#workshops rel=noopener target=_blank class=svelte-1cc53ms>Trainings</a></li> </ul> </nav> <div class="svelte-1cc53ms title-container"> <h1 class=svelte-1cc53ms>What Web Can Do Today?</h1> <p class=svelte-1cc53ms>Can I rely on the Web Platform features to build my app?</p> <p class=svelte-1cc53ms>An overview of the device integration HTML5 APIs</p> </div> </header> <main class="svelte-126eukc page"> <nav aria-label=breadcrumbs class=breadcrumb> <ul> <li><a href=/ >Features</a></li> <li class=is-active><a href=/scheduler.html aria-current=page>Task Scheduling</a></li> </ul> </nav> <article> <h2>Task Scheduling</h2> <section> <p>There is no generic task scheduler available for the Web applications as of early 2020. There are however few active attempts to solve the most prominent use cases for scheduler, separately.<p>The first proposal is called <strong>Periodic Background Sync API</strong> and it addresses the background data synchronization use case. It complements the <a href=/background-sync.html>Background Sync</a> capability. It allows the Web applications to register for the periodic event that causes the Service Worker to be woken up and make it possible to execute HTTP request without user interaction. The API, as of early 2020, is experimentally available in Google Chrome 80+ only and its usage is restricted to <a href=/installation.html>installed</a> applications with high enough engagement score. The API does not guarantee the interval of the synchronization – it allows requesting minimum interval via <code>minInterval</code> parameter, although to avoid abuse, the actual interval is dependent on the number of factors such as the network trustworthiness and the frequency the user uses the app.<p>The second proposal is called <strong>Notification Trigger API</strong>. It is an extension to the existing <a href=/local-notifications.html>Notifications API</a> that allows the local notification to be deferred and scheduled to be shown according to the external trigger – i.e. time- or location-based. The notification needs to be pre-created and the API doesn't allow any code to be executed at the trigger. The API is only available in Google Chrome 80+ via <a href=https://developers.chrome.com/origintrials/#/view_trial/6883752030435803137 rel=noopener target=_blank>Origin Trial</a> experimentation and as of early 2020 is limited to time-based triggers.<p>Historically, the earliest attempt to provide the Web applications an ability to be activated according to the system-level scheduler was called <strong>Web Alarms API</strong>. It was abandoned in 2013 in favor of the newer <strong>Task Scheduler API</strong> proposal based on Service Worker primitives that in turn was abandoned as too generic and open for abuse. Its idea was to act as a wrapper for the underlying operating system scheduler and allow authorized Web applications implementing broad scenarios such as alarms, reminders or periodic data synchronization. It was supposed to wake up the system at the specific time or in the first possible moment after the scheduled time and run the user-defined handler within the Service Worker instance.</p> </section> <section> <h3>API glimpse</h3> <div class="language-javascript api-glimpse"><p><b>Periodic Background Sync API (experimental)</b></p> <dl> <dt><code>navigator.serviceWorker.getRegistration()</code><br> <code>  .then((reg) => reg.periodicSync.register(tag, {minInterval}))</code></dt> <dd>Requests an event to be triggered within the Service Worker instance at the specified minimum interval <code>minInterval</code> with the specified <code>tag</code>.</dd> <dt><code>reg.periodicSync.getTags()</code></dt> <dd>Returns a <code>Promise</code> resolved with the sync requests already registered by the current application.</dd> <dt><code>self.addEventListener('periodicsync', listener)</code></dt> <dd>An event fired within the Service Worker periodically (at the browser-controlled interval) with the <code>tag</code>, allowing data fetch.</dd> </dl> <p><b>Notification Trigger API (experimental)</b></p> <dl> <dt><code>const trigger = new TimestampTrigger(timestamp)</code></dt> <dd>Creates a time-based trigger that will activate on a given <code>timestamp</code>.</dd> <dt><code>navigator.serviceWorker.getRegistration()</code><br> <code>  .then((reg) => reg.showNotification(title, {...options, showTrigger: trigger}))</code></dt> <dd>Schedules a local notification to be shown from within the Service Worker based on the <code>trigger</code>. For other Notification options, see <a href=/local-notifications.html>Local Notifications</a>.</dd> </dl> <p><b>Web Alarms API (never implemented)</b></p> <dl> <dt><code>navigator.serviceWorker.getRegistration()</code><br> <code>  .then((reg) => reg.taskScheduler.add(time, [data]))</code></dt> <dd>Schedules an event to be triggered within the Service Worker instance at the specified <code>time</code> with the specified <code>data</code> payload.</dd> <dt><code>reg.taskScheduler.getPendingTasks()</code></dt> <dd>Returns a <code>Promise</code> resolved with the events already scheduled by the current application.</dd> <dt><code>self.addEventListener('task', listener)</code></dt> <dd>An event fired within the Service Worker at the scheduled time (or as soon as it is possible after) with the <code>task</code> data.</dd> </dl></div> </section> <section> <h3>Live Demo</h3> <div class="svelte-126eukc demo-placeholder"> <style></style> <p><button onclick=scheduleNotification()>Schedule notification in 10s<br>(using Notification Trigger API)</button></p> </div> <ul class="svelte-126eukc tabs"> <li class="svelte-126eukc tab"> <input class=svelte-126eukc id=demo-code-js name=tabs type=radio checked> <label class=svelte-126eukc for=demo-code-js>JavaScript</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-js><code class=language-javascript>function scheduleNotification() {
  if (!('Notification' in window)) {
    alert('Notification API not supported');
    return;
  }
  if (!('showTrigger' in Notification.prototype)) {
    alert('Notification Trigger API not supported');
    return;
  }
  
  Notification.requestPermission()
    .then(() => {
      if (Notification.permission !== 'granted') {
        throw 'Notification permission is not granted';
      }
    })
    .then(() => navigator.serviceWorker.getRegistration())
    .then((reg) => {
      reg.showNotification("Hi there from the past!", {
          showTrigger: new TimestampTrigger(new Date().getTime() + 10 * 1000)
      })
    })
    .catch((err) => {
      alert('Notification Trigger API error: ' + err);
    });
}</code></pre> </li> <li class="svelte-126eukc tab"> <input class=svelte-126eukc id=demo-code-html name=tabs type=radio> <label class=svelte-126eukc for=demo-code-html>HTML</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-html><code class=language-html>&lt;p>&lt;button onclick="scheduleNotification()">Schedule notification in 10s&lt;br>(using Notification Trigger API)&lt;/button>&lt;/p></code></pre> </li> </ul> </section> <section> <h3>Resources</h3> <ul class=resources> <li><a href=https://webplatformapis.com/periodic_sync/periodicSync_improved.html rel=noopener target=_blank>Demo application for Periodic Background Sync API</a><li><a href=https://github.com/WICG/BackgroundSync/blob/master/explainers/periodicsync-explainer.md rel=noopener target=_blank>Periodic Background Sync API explainer</a><li><a href=https://web.dev/periodic-background-sync/ rel=noopener target=_blank>Richer offline experiences with the Periodic Background Sync API</a><li><a href=https://web.dev/notification-triggers/ rel=noopener target=_blank>Notification Trigger API description</a><li><a href=https://www.w3.org/TR/task-scheduler/ rel=noopener target=_blank>Task Scheduler API specification proposal</a><li><a href=https://www.w3.org/TR/2013/WD-web-alarms-20130205/ rel=noopener target=_blank>Web Alarms API abandoned proposal</a></li> </ul> </section> </article> </main> <div class="svelte-p0dnmz loader" aria-hidden=true> <div class="svelte-p0dnmz lds-ellipsis"> <div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div> </div> </div> <div class="svelte-btjd4g container" aria-label="Website footer"> <div class="text-center contact"> <h2 class=svelte-btjd4g>Get in touch</h2> <ul class=svelte-btjd4g> <li class=svelte-btjd4g><a href=mailto:hi@adambar.pl class="svelte-btjd4g icon mail-icon">Mail</a></li> <li class=svelte-btjd4g><a href=https://twitter.com/WhatWebCanDo rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon twitter-icon">Twitter</a></li> <li class=svelte-btjd4g><a href=https://linkedin.com/in/adamrbar rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon linkedin-icon">LinkedIn</a></li> <li class=svelte-btjd4g><a href=https://github.com/NOtherDev/whatwebcando rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon github-icon">GitHub</a></li> </ul> </div> <footer class=svelte-btjd4g role=contentinfo> <p class=text-left><a href=/privacy.html class=svelte-btjd4g>Privacy Policy</a></p> <p class=text-right> Created by <a href=https://adambar.pl rel=noopener target=_blank class=svelte-btjd4g>Adam Bar</a><br> Licenced under <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel="noreferrer noopener" target=_blank class=svelte-btjd4g>CC-BY-SA 4.0</a> </p> </footer> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,]};if('serviceWorker' in navigator) window.addEventListener('load',function(){navigator.serviceWorker.register('/service-worker.js');});(function(){try{eval("async function x(){}");var main="/client/client.813f3e59.js"}catch(e){main="/client/legacy/client.156a0f57.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 