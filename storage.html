<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs" name=description> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2 rel=preload type=font/woff2 as=font crossorigin=anonymous> <link href=/Material-Design-Icons.woff rel=preload type=font/woff2 as=font crossorigin=anonymous> <style>@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:local('Source Sans Pro Regular'),local('SourceSansPro-Regular'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:700;font-display:swap;src:local('Source Sans Pro Bold'),local('SourceSansPro-Bold'),url(https://fonts.gstatic.com/s/sourcesanspro/v13/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Material Design Icons";src:url(/Material-Design-Icons.woff) format("woff");font-weight:400;font-style:normal}</style> <link href=icon-76x76.png rel=apple-touch-icon sizes="60x60 72x72 76x76"> <link href=icon-120x120.png rel=apple-touch-icon sizes="114x114 120x120"> <link href=icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=icon-180x180.png rel=apple-touch-icon sizes="167x167 180x180"> <link href=icon-32x32.png rel=icon sizes="16x16 32x32" type=image/png> <link href=icon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=manifest.json rel=manifest> <link href=client/main.4188134553.css rel=stylesheet><link href=client/[feature].html.2825da7c.css rel=stylesheet><link href=client/prism.3fa19f60.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>What Web Can Do Today: Offline Storage</title> <meta content="What Web Can Do Today: Offline Storage" property=og:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." property=og:description> <meta content=https://whatwebcando.today/storage.html property=og:url> <meta content=https://whatwebcando.today/images/share-image.png property=og:image> <meta content="What Web Can Do Today: Offline Storage" name=twitter:title> <meta content="Can I rely on the Web Platform features to build my app? An overview of the device integration HTML5 APIs." name=twitter:description> <meta content=https://whatwebcando.today/images/share-image.png name=twitter:image><noscript id=sapper-head-end></noscript> <meta content=yes name=apple-mobile-web-app-capable> <meta content=yes name=mobile-web-app-capable> <meta content="What Web Can Do Today" name=application-name> <meta content="What Web Can Do" name=apple-mobile-web-app-title> <meta content=https://whatwebcando.today/icon-144x144.png name=msapplication-TileImage> <meta content=#ffffff name=theme-color> <meta content=#ffffff name=msapplication-navbutton-color> <meta content=black-translucent name=apple-mobile-web-app-status-bar-style> <meta content=/ name=msapplication-starturl> <meta content=website property=og:type> <meta content=WhatWebCanDo property=og:site_name> <meta content=summary name=twitter:card> <meta content=@WhatWebCanDo name=twitter:site> </head> <body> <div id=sapper> <header class="svelte-1cc53ms text-center"> <nav> <ul class=svelte-1cc53ms> <li class=svelte-1cc53ms><a href=. class=svelte-1cc53ms>Features</a></li> <li class=svelte-1cc53ms><a href=/articles/ class=svelte-1cc53ms>Articles</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#services rel=noopener target=_blank class=svelte-1cc53ms>Services</a></li> <li class=svelte-1cc53ms><a href=https://adambar.pl/#workshops rel=noopener target=_blank class=svelte-1cc53ms>Trainings</a></li> </ul> </nav> <div class="svelte-1cc53ms title-container"> <h1 class=svelte-1cc53ms>What Web Can Do Today?</h1> <p class=svelte-1cc53ms>Can I rely on the Web Platform features to build my app?</p> <p class=svelte-1cc53ms>An overview of the device integration HTML5 APIs</p> </div> </header> <main class="svelte-126eukc page"> <nav aria-label=breadcrumbs class=breadcrumb> <ul> <li><a href=/ >Features</a></li> <li class=is-active><a href=/storage.html aria-current=page>Offline Storage</a></li> </ul> </nav> <article> <h2>Offline Storage</h2> <section> <p>There were <a href=http://diveinto.html5doctor.com/storage.html rel=noopener target=_blank>several iterations</a> of prototypes and standardized technologies for offline storage capabilities for Web applications. First attempts were either just hacky workarounds (like to store data in cookies) or required additional software (like Flash or Google Gears). Later, Web SQL idea, basically to include SQLite natively within a browser, was coined and <a href="http://caniuse.com/#feat=sql-storage" rel=noopener target=_blank>implemented throughout some browsers</a>, but deprecated later <a href=https://hacks.mozilla.org/2010/06/beyond-html5-database-apis-and-the-road-to-indexeddb/ rel=noopener target=_blank>due to the standardization difficulties</a>.<p>Right now there are at least three distinct and independent technologies standardized and available. The simplest one is <b>Web Storage</b> - a key-value string storage, allowing Web applications to store data either persistently and cross-window (<code>localStorage</code>) or for a single session in a single browser tab (<code>sessionStorage</code>). The more sophisticated <b>IndexedDB</b> is a low-level API over database-like structures with transactions and cursors iterating by indexes. The newest addition - <b>Cache API</b> is a specialized solution to keep <code>Request</code>/<code>Response</code> pairs, useful mostly within <a href=/offline.html>Service Worker</a> implementation.<p>Live example and usage data shown here are referring to <b>Web Storage</b> engine. For details on IndexedDB, refer to <a href="http://caniuse.com/#feat=indexeddb" rel=noopener target=_blank>caniuse.com</a>.<p>The actual persistence of data stored in any of the persistent stores (be it <code>localStorage</code>, IndexedDB or Cache API) is browser-managed and by default might be wiped out without end-user consent in case of memory pressure conditions. To address this problem, <b>Storage API</b> was introduced - it gives the Web applications a method to store the data in a fully reliable way if the user permits it to do so. Chrome's implementation grants this permission based on user-engagement-based heuristic, while Firefox asks for the permission explicitly.</p> </section> <section> <h3>API glimpse</h3> <div class="language-javascript api-glimpse"><p><b>Web Storage API</b></p> <dl> <dt><code>window.sessionStorage</code></dt> <dd>Gives an access to the Web Storage engine with per-session objects lifetime.</dd> <dt><code>window.localStorage</code></dt> <dd>Gives an access to the Web Storage engine with persistent objects lifetime.</dd> <dt><code>storage.setItem(key, value)</code></dt> <dd>Saves the <code>value</code> string under the <code>key</code> in the selected storage engine.</dd> <dt><code>storage.getItem(key)</code></dt> <dd>Returns the string value stored under the <code>key</code> in the selected storage engine.</dd> <dt><code>storage.removeItem(key)</code></dt> <dd>Removes the string value stored under the <code>key</code> from the selected storage engine.</dd> <dt><code>storage.clear()</code></dt> <dd>Removes all the string values stored in the selected storage engine.</dd> <dt><code>window.addEventListener('storage', listener)</code></dt> <dd>An event fired when the data stored in either <code>sessionStorage</code> or <code>localStorage</code> has been changed externally.</dd> </dl> <p><b>IndexedDB</b></p> <dl> <dt><code>let openRequest = window.indexedDB.open(name, version)</code></dt> <dd>Triggers opening a database connection to either existing or newly-created database. Returns an object that fires <code>success</code> event when the connection is established.</dd> <dt><code>let db = openRequest.result</code></dt> <dd>Gives an access to the open database connection instance - available after <code>success</code> was fired.</dd> <dt><code>db.createObjectStore(storeName, options)</code></dt> <dd>Creates a named container (object store) for objects in the opened database.</dd> <dt><code>let tx = db.transaction(storeName)</code></dt> <dd>Opens a data-reading or data-manipulation transaction scoped to the given object store(s).</dd> <dt><code>tx.objectStore.put(value, key)</code></dt> <dd>Saves the <code>value</code> in the currently opened object store.</dd> <dt><code>tx.objectStore.get(key)</code></dt> <dd>Gets the object stored under a <code>key</code> in the currently opened object store.</dd> <dt><code>tx.createIndex(name, keyPath, options)</code></dt> <dd>Creates an index that allows to seek for the stored objects using the property specified via <code>keyPath</code>.</dd> <dt><code>tx.index(name).get(key)</code></dt> <dd>Gets the object having the particular index <code>keyPath</code> equal to the <code>key</code> specified.</dd> </dl> <p><b>Cache API</b></p> <dl> <dt><code>let cache = window.caches.open(key)</code></dt> <dd>Returns a <code>Promise</code> that resolves to a store "bucket" object giving an access to the cached <code>Response</code> objects.</dd> <dt><code>cache.put(request, response)</code></dt> <dd>Saves the <code>Response</code> object to the cache with its corresponding <code>Request</code> object.</dd> <dt><code>cache.match(request, option)</code></dt> <dd>Returns a <code>Promise</code> that resolves to the <code>Response</code> object matching the specified <code>Request</code> (with the <code>options</code>-controlled level of exactness) found in the opened cache "bucket".</dd> <dt><code>cache.delete(request, option)</code></dt> <dd>Removes the <code>Response</code> object matching the specified <code>Request</code> (with the <code>options</code>-controlled level of exactness) found in the opened cache "bucket".</dd> </dl> <p><b>Storage API (persistence permission)</b></p> <dl> <dt><code>navigator.storage.persist()</code></dt> <dd>Requests a permission to turn the data saved by the Web application into persistent data. Returns a <code>Promise</code> that resolves with a boolean value indicating whether the permission was granted.</dd> <dt><code>navigator.storage.persisted()</code></dt> <dd>Returns a <code>Promise</code> that resolves with a boolean value indicating whether the persistent storage permission was already granted.</dd> </dl></div> </section> <section> <h3>Live Demo</h3> <div class="svelte-126eukc demo-placeholder"> <style></style> <p> <label>Engine</label> </p> <div id=selectEngine role=group> <input name=engine type=radio checked value=localStorage> Persistent Storage <input name=engine type=radio value=sessionStorage> Per-Session Storage </div> <p> <label for=value>Value for <code>myKey</code></label> <input id=value> </p> <p>Open the example in another tab and change the value there to see the synchronization via <code>storage</code> event.</p> <div id=target></div> </div> <ul class="svelte-126eukc tabs"> <li class="svelte-126eukc tab"> <input name=tabs type=radio checked class=svelte-126eukc id=demo-code-js> <label for=demo-code-js class=svelte-126eukc>JavaScript</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-js><code class=language-javascript>if ('localStorage' in window || 'sessionStorage' in window) {
  var selectedEngine;

  var logTarget = document.getElementById('target');
  var valueInput = document.getElementById('value');

  var reloadInputValue = function () {
  console.log(selectedEngine, window[selectedEngine].getItem('myKey'))
    valueInput.value = window[selectedEngine].getItem('myKey') || '';
  }
  
  var selectEngine = function (engine) {
    selectedEngine = engine;
    reloadInputValue();
  };

  function handleChange(change) {
    var timeBadge = new Date().toTimeString().split(' ')[0];
    var newState = document.createElement('p');
    newState.innerHTML = '&lt;span class="badge">' + timeBadge + '&lt;/span> ' + change + '.';
    logTarget.appendChild(newState);
  }

  var radios = document.querySelectorAll('#selectEngine input');
  for (var i = 0; i &lt; radios.length; ++i) {
    radios[i].addEventListener('change', function () {
      selectEngine(this.value)
    });
  }
  
  selectEngine('localStorage');

  valueInput.addEventListener('keyup', function () {
    window[selectedEngine].setItem('myKey', this.value);
  });

  var onStorageChanged = function (change) {
    var engine = change.storageArea === window.localStorage ? 'localStorage' : 'sessionStorage';
    handleChange('External change in &lt;b>' + engine + '&lt;/b>: key &lt;b>' + change.key + '&lt;/b> changed from &lt;b>' + change.oldValue + '&lt;/b> to &lt;b>' + change.newValue + '&lt;/b>');
    if (engine === selectedEngine) {
      reloadInputValue();
    }
  }

  window.addEventListener('storage', onStorageChanged);
}</code></pre> </li> <li class="svelte-126eukc tab"> <input name=tabs type=radio class=svelte-126eukc id=demo-code-html> <label for=demo-code-html class=svelte-126eukc>HTML</label> <pre class="svelte-126eukc demo-code-tab" id=demo-code-content-html><code class=language-html>&lt;p>
  &lt;label>Engine&lt;/label>
&lt;/p>
&lt;div role="group" id="selectEngine">
  &lt;input type="radio" name="engine" value="localStorage" checked/> Persistent Storage
  &lt;input type="radio" name="engine" value="sessionStorage"/> Per-Session Storage
&lt;/div>

&lt;p>
  &lt;label for="value">Value for &lt;code>myKey&lt;/code>&lt;/label>
  &lt;input type="text" id="value">
&lt;/p>

&lt;p>Open the example in another tab and change the value there to see the synchronization via &lt;code>storage&lt;/code> event.&lt;/p>
&lt;div id="target">&lt;/div></code></pre> </li> </ul> </section> <section aria-hidden=true> <h3>Browser support</h3> <div class=caniuse-report> <div class="svelte-126eukc row"> <div class="svelte-126eukc col-sm-6 ct-chart browsers-chart"></div> <div class="svelte-126eukc col-sm-6 ct-chart overall-chart"></div> </div> <div class="svelte-126eukc row"> <div class="svelte-126eukc legend"> <ul class=svelte-126eukc> <li class=svelte-126eukc><i class="cl-support cl-support-no"></i> No support</li> <li class=svelte-126eukc><i class="cl-support cl-support-partial"></i> Partial support, <a href="http://caniuse.com/#feat=namevalue-storage" rel=noopener target=_blank>see details</a></li> <li class=svelte-126eukc><i class="cl-support cl-support-full"></i> Full support</li> </ul> </div> <div class="svelte-126eukc text-right"> <a href="http://caniuse.com/#feat=namevalue-storage" rel=noopener target=_blank>Data from caniuse.com</a>, <small>CC-BY 4.0 license</small> </div> </div> </div> </section> <section> <h3>Resources</h3> <ul class=resources> <li><a href=https://html.spec.whatwg.org/multipage/webstorage.html rel=noopener target=_blank>Web Storage Specification</a><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API rel=noopener target=_blank>MDN: Web Storage API</a><li><a href=https://www.w3.org/TR/IndexedDB/ rel=noopener target=_blank>IndexedDB Specification</a><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API rel=noopener target=_blank>MDN: IndexedDB API</a><li><a href=https://w3c.github.io/ServiceWorker/v1/#cache rel=noopener target=_blank>Cache API Specification</a><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Cache rel=noopener target=_blank>MDN: Cache API</a><li><a href=https://storage.spec.whatwg.org/ rel=noopener target=_blank>Storage API Specification</a><li><a href=https://developers.google.com/web/updates/2016/06/persistent-storage rel=noopener target=_blank>Google Developers: Persistent Storage</a></li> </ul> </section> </article> </main> <div class="svelte-p0dnmz loader" aria-hidden=true> <div class="svelte-p0dnmz lds-ellipsis"> <div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div><div class=svelte-p0dnmz></div> </div> </div> <div class="svelte-btjd4g container" aria-label="Website footer"> <div class="text-center contact"> <h2 class=svelte-btjd4g>Get in touch</h2> <ul class=svelte-btjd4g> <li class=svelte-btjd4g><a href=mailto:hi@adambar.pl class="svelte-btjd4g icon mail-icon">Mail</a></li> <li class=svelte-btjd4g><a href=https://twitter.com/WhatWebCanDo rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon twitter-icon">Twitter</a></li> <li class=svelte-btjd4g><a href=https://linkedin.com/in/adamrbar rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon linkedin-icon">LinkedIn</a></li> <li class=svelte-btjd4g><a href=https://github.com/NOtherDev/whatwebcando rel="noreferrer noopener" target=_blank class="svelte-btjd4g icon github-icon">GitHub</a></li> </ul> </div> <footer class=svelte-btjd4g role=contentinfo> <p class=text-left><a href=/privacy.html class=svelte-btjd4g>Privacy Policy</a></p> <p class=text-right> Created by <a href=https://adambar.pl rel=noopener target=_blank class=svelte-btjd4g>Adam Bar</a><br> Licenced under <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel="noreferrer noopener" target=_blank class=svelte-btjd4g>CC-BY-SA 4.0</a> </p> </footer> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,]};if('serviceWorker' in navigator) window.addEventListener('load',function(){navigator.serviceWorker.register('/service-worker.js');});(function(){try{eval("async function x(){}");var main="/client/client.813f3e59.js"}catch(e){main="/client/legacy/client.156a0f57.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 